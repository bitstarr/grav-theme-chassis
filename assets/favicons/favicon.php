<?php
    header('Content-Type: image/svg+xml');
    $path = '//' . $_SERVER['HTTP_HOST'] . dirname($_SERVER['SCRIPT_NAME']);
    $letter = ( isset( $_GET['letter'] ) ) ? ucfirst( $_GET['letter'] )[0] : ucfirst($_SERVER['HTTP_HOST'])[0];
?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="#111">
    <style>
        .letter {
            fill: #000000;
            font: bold 350px sans-serif;
        }
        .bg {
            fill: #ffffff;
        }
        @media (prefers-color-scheme: dark) {
            .letter { fill: #ffffff; }
            .bg { fill: #000000; }
        }
    </style>

    <?php /*
    <image x="0" y="0" width="512" height="512" href="<?php echo $path ?>/favicon.svg" />
    */ ?>
    <rect class="bg" width="512" height="512"/>
    <text x="50%" y="38%" dominant-baseline="middle" text-anchor="middle" class="letter">
        <?php echo $letter ?>
    </text>
<?php
switch ( $_GET['env'] )
{
    case 'preview':
?>
    <rect x="0" y="312" width="512" height="200" fill="#46A0B2" />
    <path d="M435.733 365.539l-11.895 92.986h-15.221l-9.465-60.115-10.169 60.115h-15.22l-11.959-92.986h16.115l4.669 64.527 10.04-64.527h12.279l10.04 64.527 4.669-64.527h16.117zm-110.636 0h-7.035v92.986h41.313v-15.477h-25.453v-23.022h22.256v-15.413h-22.256v-23.598h25.453v-15.477h-34.278zm-156.681 51.152l13.747 41.834h-17.012l-11.501-39.33h-5.319v39.33h-15.54v-93.051h22.894c5.03 0 9.326.822 12.887 2.463 3.559 1.642 6.277 4.051 8.154 7.227 1.875 3.177 2.814 6.981 2.814 11.415v10.872c0 4.562-.938 8.474-2.814 11.735-1.877 3.262-4.604 5.745-8.186 7.45-.039.02-.083.036-.124.055zm-20.083-12.716h8.314c1.364 0 2.547-.245 3.549-.735 1.001-.49 1.759-1.193 2.271-2.111.511-.916.767-2.014.767-3.293v-10.36c0-1.407-.256-2.622-.767-3.646a5.232 5.232 0 00-2.271-2.334c-1.002-.532-2.186-.8-3.549-.8h-8.314v23.279zM120.45 375.1c1.705 3.134 2.558 6.897 2.558 11.288v15.668c0 4.307-.863 7.984-2.59 11.032-1.727 3.048-4.231 5.371-7.514 6.971-3.284 1.599-7.206 2.397-11.767 2.397h-8.442v36.069h-15.86v-92.986h24.301c4.604 0 8.547.811 11.831 2.43 3.283 1.621 5.777 3.997 7.483 7.131zm-13.494 13.589c0-1.662-.246-3.091-.735-4.284-.491-1.193-1.205-2.1-2.142-2.719-.938-.617-2.069-.927-3.39-.927h-7.994v26.476h7.994c1.279 0 2.387-.297 3.326-.895.937-.597 1.663-1.472 2.174-2.622.512-1.151.767-2.516.767-4.093v-10.936zm185.142 69.836h15.859v-92.986h-15.859v92.986zM261.4 429.747l-8.89-64.208h-16.819l17.139 92.986h17.14l17.139-92.986h-16.82l-8.889 64.208zm-62.417-64.208h-7.035v92.986h41.313v-15.477h-25.453v-23.022h22.255v-15.413h-22.255v-23.598h25.453v-15.477h-34.278z"/>
<?php
        break;
    case 'stage':
?>
    <rect x="0" y="312" width="512" height="200" fill="#97B246" />
    <path d="M98.568 348.387h25.152V481.86H98.568V348.387zm12.668 109.238h32.037c8.262 0 14.656-1.988 19.186-5.967 4.528-3.978 6.793-9.607 6.793-16.891v-39.289c0-7.282-2.265-12.912-6.793-16.891-4.529-3.978-10.924-5.967-19.186-5.967h-32.037v-24.234h31.486c11.138 0 20.639 1.867 28.503 5.6 7.863 3.733 13.846 9.18 17.946 16.34 4.1 7.16 6.15 15.789 6.15 25.887v37.82c0 9.608-1.974 17.992-5.921 25.152s-9.868 12.729-17.763 16.707c-7.895 3.979-17.564 5.967-29.008 5.967h-31.395v-24.234zm108.871-109.238h25.152V481.86h-25.152V348.387zm9.088 0h80.322v24.234h-80.322v-24.234zm0 55.078h70.225v24.234h-70.225v-24.234zm0 54.16h80.322v24.234h-80.322v-24.234zm89.502-109.238h25.887l28.365 89.043 28.365-89.043h25.887l-44.43 133.473h-19.645l-44.429-133.473z"/>
<?php
        break;
    case 'dev':
    default:
?>
    <rect x="0" y="312" width="512" height="200" fill="#46B28F" />
    <path d="M98.568 348.387h25.152V481.86H98.568V348.387zm12.668 109.238h32.037c8.262 0 14.656-1.988 19.186-5.967 4.528-3.978 6.793-9.607 6.793-16.891v-39.289c0-7.282-2.265-12.912-6.793-16.891-4.529-3.978-10.924-5.967-19.186-5.967h-32.037v-24.234h31.486c11.138 0 20.639 1.867 28.503 5.6 7.863 3.733 13.846 9.18 17.946 16.34 4.1 7.16 6.15 15.789 6.15 25.887v37.82c0 9.608-1.974 17.992-5.921 25.152s-9.868 12.729-17.763 16.707c-7.895 3.979-17.564 5.967-29.008 5.967h-31.395v-24.234zm108.871-109.238h25.152V481.86h-25.152V348.387zm9.088 0h80.322v24.234h-80.322v-24.234zm0 55.078h70.225v24.234h-70.225v-24.234zm0 54.16h80.322v24.234h-80.322v-24.234zm89.502-109.238h25.887l28.365 89.043 28.365-89.043h25.887l-44.43 133.473h-19.645l-44.429-133.473z"/>
    <?php
        break;
}
?>